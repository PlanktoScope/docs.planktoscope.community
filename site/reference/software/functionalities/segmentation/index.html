<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An open and affordable imaging platform for citizen oceanography"><link href="https://docs.planktoscope.community/reference/software/functionalities/segmentation/" rel="canonical"><link href=../sample-imaging/ rel=prev><link href=../../interfaces/mqtt/ rel=next><link rel=icon href=../../../../images/logos/planktoscope_lavender.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.18"><title>Image Segmentation - PlanktoScope Documentation</title><link rel=stylesheet href=../../../../assets/stylesheets/main.66ac8b77.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel="stylesheet" href="../../../../assets/external/fonts.googleapis.com/css.9f91bc67.css"><style>:root{--md-text-font:"Atkinson Hyperlegible";--md-code-font:"Oxygen Mono"}</style><link rel=stylesheet href=../../../../stylesheets/extra.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Image Segmentation - PlanktoScope Documentation"><meta property=og:description content="An open and affordable imaging platform for citizen oceanography"><meta property=og:image content=https://docs.planktoscope.community/assets/images/social/reference/software/functionalities/segmentation.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://docs.planktoscope.community/reference/software/functionalities/segmentation/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Image Segmentation - PlanktoScope Documentation"><meta name=twitter:description content="An open and affordable imaging platform for citizen oceanography"><meta name=twitter:image content=https://docs.planktoscope.community/assets/images/social/reference/software/functionalities/segmentation.png><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#image-segmentation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="PlanktoScope Documentation" class="md-header__button md-logo" aria-label="PlanktoScope Documentation" data-md-component=logo> <img src=../../../../images/logos/planktoscope_white.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PlanktoScope Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Image Segmentation </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href="https://github.com/PlanktoScope/PlanktoScope" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="PlanktoScope Documentation" class="md-nav__button md-logo" aria-label="PlanktoScope Documentation" data-md-component=logo> <img src=../../../../images/logos/planktoscope_white.png alt=logo> </a> PlanktoScope Documentation </label> <div class=md-nav__source> <a href="https://github.com/PlanktoScope/PlanktoScope" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../../setup/ class="md-nav__link "> <span class=md-ellipsis> Setup </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__container"> <a href=../../../../setup/hardware/ class="md-nav__link "> <span class=md-ellipsis> Hardware </span> </a> <label class="md-nav__link " for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <div class="md-nav__link md-nav__container"> <a href=../../../../setup/hardware/v2.5/ class="md-nav__link "> <span class=md-ellipsis> v2.5 </span> </a> <label class="md-nav__link " for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> v2.5 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../setup/hardware/v2.5/kit/ class=md-nav__link> <span class=md-ellipsis> Kit Production </span> </a> </li> <li class=md-nav__item> <a href=../../../../setup/hardware/v2.5/assembly/ class=md-nav__link> <span class=md-ellipsis> Assembly </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <div class="md-nav__link md-nav__container"> <a href=../../../../setup/hardware/v2.1/ class="md-nav__link "> <span class=md-ellipsis> v2.1 </span> </a> <label class="md-nav__link " for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> v2.1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../setup/hardware/v2.1/kit/ class=md-nav__link> <span class=md-ellipsis> Kit Production </span> </a> </li> <li class=md-nav__item> <a href=../../../../setup/hardware/v2.1/assembly/ class=md-nav__link> <span class=md-ellipsis> Assembly </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__container"> <a href=../../../../setup/software/ class="md-nav__link "> <span class=md-ellipsis> Software </span> </a> <label class="md-nav__link " for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../setup/software/standard-install/ class=md-nav__link> <span class=md-ellipsis> Standard Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../../setup/software/nonstandard-install/ class=md-nav__link> <span class=md-ellipsis> Non-Standard Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../../setup/software/config/ class=md-nav__link> <span class=md-ellipsis> Post-Installation Configuration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../../operation/ class="md-nav__link "> <span class=md-ellipsis> Operation </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Operation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../operation/user-interface/ class=md-nav__link> <span class=md-ellipsis> Graphical User Interface </span> </a> </li> <li class=md-nav__item> <a href=../../../../operation/maintenance/ class=md-nav__link> <span class=md-ellipsis> Maintenance </span> </a> </li> <li class=md-nav__item> <a href=../../../../operation/software-upgrades/ class=md-nav__link> <span class=md-ellipsis> Software Reset & Upgrades </span> </a> </li> <li class=md-nav__item> <a href=../../../../operation/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../../../operation/clone-sd/ class=md-nav__link> <span class=md-ellipsis> SD Card Cloning </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../../troubleshooting/ class="md-nav__link "> <span class=md-ellipsis> Troubleshooting </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../../../community/ class="md-nav__link "> <span class=md-ellipsis> Community </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Community </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Contribute </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Contribute </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../community/contribute/github/ class=md-nav__link> <span class=md-ellipsis> Github </span> </a> </li> <li class=md-nav__item> <a href=../../../../community/contribute/hardware/ class=md-nav__link> <span class=md-ellipsis> Hardware </span> </a> </li> <li class=md-nav__item> <a href=../../../../community/contribute/software/ class=md-nav__link> <span class=md-ellipsis> Software </span> </a> </li> <li class=md-nav__item> <a href=../../../../community/contribute/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../community/code-of-conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=../../../../community/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <div class="md-nav__link md-nav__container"> <a href=../../../ class="md-nav__link "> <span class=md-ellipsis> Technical Reference </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Technical Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> Hardware </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hardware/product-specs/ class=md-nav__link> <span class=md-ellipsis> Product Specifications </span> </a> </li> <li class=md-nav__item> <a href=../../../hardware/hat/ class=md-nav__link> <span class=md-ellipsis> Planktoscope HAT </span> </a> </li> <li class=md-nav__item> <a href=../../../hardware/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3 checked> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> Software </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=true> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../product-specs/ class=md-nav__link> <span class=md-ellipsis> Product Specifications </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_2> <label class=md-nav__link for=__nav_6_3_2 id=__nav_6_3_2_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/os/ class=md-nav__link> <span class=md-ellipsis> Operating System </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_3 checked> <label class=md-nav__link for=__nav_6_3_3 id=__nav_6_3_3_label tabindex=0> <span class=md-ellipsis> Functionalities </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> Functionalities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../camera-settings/ class=md-nav__link> <span class=md-ellipsis> Camera Settings </span> </a> </li> <li class=md-nav__item> <a href=../sample-imaging/ class=md-nav__link> <span class=md-ellipsis> Sample Imaging </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Image Segmentation </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Image Segmentation </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#median-calculation-step class=md-nav__link> <span class=md-ellipsis> Median-calculation step </span> </a> </li> <li class=md-nav__item> <a href=#image-correction-step class=md-nav__link> <span class=md-ellipsis> Image-correction step </span> </a> </li> <li class=md-nav__item> <a href=#mask-calculation-step class=md-nav__link> <span class=md-ellipsis> Mask-calculation step </span> </a> </li> <li class=md-nav__item> <a href=#object-extraction-step class=md-nav__link> <span class=md-ellipsis> Object-extraction step </span> </a> <nav class=md-nav aria-label="Object-extraction step"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#metadata-calculation class=md-nav__link> <span class=md-ellipsis> Metadata calculation </span> </a> </li> <li class=md-nav__item> <a href=#output-image-cropping class=md-nav__link> <span class=md-ellipsis> Output image cropping </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_4> <label class=md-nav__link for=__nav_6_3_4 id=__nav_6_3_4_label tabindex=0> <span class=md-ellipsis> Interfaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_4> <span class="md-nav__icon md-icon"></span> Interfaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../interfaces/mqtt/ class=md-nav__link> <span class=md-ellipsis> MQTT API </span> </a> </li> <li class=md-nav__item> <a href=../../interfaces/exported-metadata/ class=md-nav__link> <span class=md-ellipsis> Exported Metadata </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_5> <label class=md-nav__link for=__nav_6_3_5 id=__nav_6_3_5_label tabindex=0> <span class=md-ellipsis> Subsystems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_5> <span class="md-nav__icon md-icon"></span> Subsystems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../subsystems/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../subsystems/startup/ class=md-nav__link> <span class=md-ellipsis> Startup </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../release-process/ class=md-nav__link> <span class=md-ellipsis> Release Process </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../faq/ class=md-nav__link> <span class=md-ellipsis> Frequently Asked Questions </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#median-calculation-step class=md-nav__link> <span class=md-ellipsis> Median-calculation step </span> </a> </li> <li class=md-nav__item> <a href=#image-correction-step class=md-nav__link> <span class=md-ellipsis> Image-correction step </span> </a> </li> <li class=md-nav__item> <a href=#mask-calculation-step class=md-nav__link> <span class=md-ellipsis> Mask-calculation step </span> </a> </li> <li class=md-nav__item> <a href=#object-extraction-step class=md-nav__link> <span class=md-ellipsis> Object-extraction step </span> </a> <nav class=md-nav aria-label="Object-extraction step"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#metadata-calculation class=md-nav__link> <span class=md-ellipsis> Metadata calculation </span> </a> </li> <li class=md-nav__item> <a href=#output-image-cropping class=md-nav__link> <span class=md-ellipsis> Output image cropping </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href="https://github.com/PlanktoScope/PlanktoScope/edit/master/documentation/docs/reference/software/functionalities/segmentation.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=image-segmentation>Image Segmentation<a class=headerlink href=#image-segmentation title="Permanent link">ðŸ”—</a></h1> <p>This document explains how the PlanktoScope software's <em>segmenter</em> program processes raw images (captured by the PlanktoScope's <a href=../sample-imaging/ >sample-imaging functionality</a>) in order to detect objects - such as plankton, microplastics, and other particles - and to extract each object into its own <a href="https://en.wikipedia.org/wiki/Image_segmentation">segmented image</a> for downstream use, such as for uploading to EcoTaxa. This document also lists and explains the metadata fields added by the PlanktoScope segmenter for uploading to EcoTaxa.</p> <p>Currently, the segmenter only operates in batch-processing mode: the segmenter takes as input a complete raw image dataset, and it produces as output a complete segmented object dataset as well as an export archive of segmented objects which can be uploaded to EcoTaxa.</p> <p>When the segmenter starts, it will perform a <em>median-calculation</em> step on the first ten images of the dataset of raw images. The median-calculation step outputs a <em>median image</em> which is then used as an input for an <em>image-correction</em> step on each raw image; the median image will occasionally be recalculated (conditions triggering a recalculation are described below). Each image-cleaning step outputs a <em>median-corrected image</em> is then used as the input for a <em>mask-calculation</em> step. Each mask-calculation step outputs a <em>segmentation mask</em> which is then used as an input for an <em>object-extraction</em> step.</p> <p>For each raw image from the input dataset, after the object-extraction step outputs a set of objects, the number of extracted objects is accumulated into a <a href="https://en.wikipedia.org/wiki/Moving_average#Cumulative_average">cumulative moving average</a> of the number of objects extracted per raw image. However, before the cumulative moving average is updated, the number of extracted objects is compared against the previous value of the cumulative moving average (calculated after the previous raw image was processed): if the number of extracted objects is greater than the previous value of the cumulative moving average by more than 20, then the median image will be recalculated for the next raw image. The input for the next median-calculation step will usually be the next 10 consecutive raw images, unless the next raw image is one of the last 10 raw images - in which case the previous ten images will instead be used as the input for the next median-calculation step. Yes, this logic is complicated, and yes, for some reason we don't center the sequence of raw images around the next raw image as our input to the median-calculation step.</p> <h2 id=median-calculation-step>Median-calculation step<a class=headerlink href=#median-calculation-step title="Permanent link">ðŸ”—</a></h2> <p>The median-calculation step takes as input a sequence of consecutive raw images, but if the image sequence consists of an even number of images then the last image is excluded from the calculation. The median-calculation step uses the raw images to calculate a <em>median image</em>, in which the color of each pixel of the output is calculated as the median of the colors of the corresponding pixels in the input images.</p> <p>The output of this step is supposed to be an estimate of what the the "background" of the image would be if there were no objects within the field-of-view. However, this step is not robust to sample density: if a sample is dense enough that certain pixel locations overlap with objects in more than half of any consecutive sequence of ten images, the color of the "background" in those pixel locations will be estimated as the color of an object in one of those images.</p> <h2 id=image-correction-step>Image-correction step<a class=headerlink href=#image-correction-step title="Permanent link">ðŸ”—</a></h2> <p>The image-correction step takes as input a median image and a raw image. First, the image-correction step divides the color of each pixel of the raw image by the color of the corresponding pixel of the median image; this is probably intended to correct for inhomogeneous illumination in the raw image, and to remove any objects which had been stuck to the flow cell (and thus were included in the median image) from the raw image. Next, the image-correction step slightly <a href="https://scikit-image.org/docs/0.19.x/api/skimage.exposure.html#skimage.exposure.rescale_intensity">rescales</a> the intensity range of the resulting image (TODO: determine what the effect of this intensity-rescaling operation is - does it make the image brighter or dimmer? Does it increase or decrease the contrast? Does it clip the white value? Why is this step performed???). The final result is a <em>median-corrected image</em>.</p> <h2 id=mask-calculation-step>Mask-calculation step<a class=headerlink href=#mask-calculation-step title="Permanent link">ðŸ”—</a></h2> <p>The mask-calculation step takes as input a median-corrected image and the result from the previous mask-calculation step. It consists of the following operations:</p> <ol> <li> <p>"Simple threshold": this operation applies a <a href="https://docs.opencv.org/4.x/d7/d1b/group__imgproc__misc.html#gae8a4a146d1ca78c626a53577199e9c57">global threshold</a> to the input corrected image, using the <a href="https://bioimagebook.github.io/chapters/2-processing/3-thresholding/thresholding.html#triangle-method">triangle algorithm</a> to calculate an optimal threshold value for the image; the output is a mask in which each pixel is set to 0 if the corresponding pixel of the input image is greater than the threshold, and to 255 otherwise. The resulting mask should select for objects which appear darker than the background of the image.</p> </li> <li> <p>"Erode": this operation <a href="https://docs.opencv.org/3.4/d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">erodes</a> the mask with a 2-pixel-by-2-pixel square kernel. In the resulting mask, small regions (such as thresholded noise) are eliminated.</p> </li> <li> <p>"Dilate": this operation <a href="https://docs.opencv.org/3.4/d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">dilates</a> the mask with an 8-pixel-diameter circular kernel. In the resulting mask, regions remaining after the previous "erode" operation are padded with a margin.</p> </li> <li> <p>"Close": this operation <a href="https://docs.opencv.org/4.x/d4/d86/group__imgproc__filter.html#ga67493776e3ad1a3df63883829375201f">dilates and then erodes</a> the mask with an 8-pixel-diameter circular kernel. In the resulting mask, small holes in regions remaining after the previous "dilate" operation are eliminated.</p> </li> <li> <p>"Erode2": this operation <a href="https://docs.opencv.org/3.4/d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">erodes</a> the mask with an 8-pixel-diameter circular kernel, inverting the effect of the previous "dilate" operation.</p> </li> </ol> <p>The final result these operations is a spatially-filtered <em>segmentation mask</em> where the value of each pixel represents whether that pixel is part of an object or part of the background of the input corrected image.</p> <h2 id=object-extraction-step>Object-extraction step<a class=headerlink href=#object-extraction-step title="Permanent link">ðŸ”—</a></h2> <p>The object-extraction step takes the following inputs:</p> <ul> <li> <p>A median-corrected image</p> </li> <li> <p>A segmentation mask</p> </li> <li> <p>The sample metadata field <code>acq_minimum_mesh</code>: the diameter of the smallest spherical object which is expected to be in the sample, usually 20 Âµm. This value is set on the "Fluidic Acquisition" page of the PlanktoScope's Node-RED dashboard as the "Min fraction size" field.</p> </li> <li> <p>The sample metadata field <code>process_pixel</code>: the pixel size calibration of the PlanktoScope, in units of Âµm per pixel; then the area (in units of Âµm<sup>2</sup>) per pixel is <code>process_pixel * process_pixel</code>. This value is set on the "Hardware Settings" page of the PlanktoScope's Node-RED dashboard as the "Pixel size calibration: um per pixel" field.</p> </li> </ul> <p>First, the object-extraction step calculates a <em>minimum-area threshold</em> for objects to extract using the input segmentation mask: the threshold (in units of pixel<sup>2</sup>) is calculated as <code>pi * (acq_minimum_mesh / 2 / process_pixel) ^ 2</code>.</p> <p>Next, the object-extraction step <a href="https://scikit-image.org/docs/0.19.x/api/skimage.measure.html#skimage.measure.label">identifies all connected regions</a> of the input segmentation mask and <a href="https://scikit-image.org/docs/0.19.x/api/skimage.measure.html#skimage.measure.regionprops">measures properties of those regions</a>. The object-extraction step then discards any region whose filled area (<code>area_filled</code> in scikit-image) is less than the minimum-area threshold.</p> <h3 id=metadata-calculation>Metadata calculation<a class=headerlink href=#metadata-calculation title="Permanent link">ðŸ”—</a></h3> <p>For each resulting region after the minimum-area threshold is applied, that region will be used to extract a segmented and cropped image of the object (including pixels in any holes in the object) from the input median-corrected image. This cropped image is used to calculate some metadata fields about the distribution of colors in the object's segmented image:</p> <ul> <li> <p><code>MeanHue</code>: the mean of the <em>hue</em> channel of the image in a <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">hue-saturation-value (HSV) representation</a> of the image</p> </li> <li> <p><code>StdHue</code>: the standard deviation of the hue channel of the image in an HSV representation of the image</p> </li> <li> <p><code>MeanSaturation</code>: the standard deviation of the <em>saturation</em> channel of the image in an HSV representation of the image</p> </li> <li> <p><code>StdSaturation</code>: the standard deviation of the saturation channel of the image in an HSV representation of the image</p> </li> <li> <p><code>MeanValue</code>: the standard deviation of the <em>value</em> channel of the image in an HSV representation of the image</p> </li> <li> <p><code>StdValue</code>: the standard deviation of the value channel of the image in an HSV representation of the image</p> </li> </ul> <p>Additionally, some metadata for the object is calculated from the <a href="https://scikit-image.org/docs/0.19.x/api/skimage.measure.html#regionprops">region properties calculated by scikit-image</a> for that object's region:</p> <ul> <li><code>label</code>: The identifier of the object's region, as assigned by scikit-image. This corresponds to the <code>label</code> region property in scikit-image.</li> </ul> <h4 id=basic-area-properties>Basic area properties<a class=headerlink href=#basic-area-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li> <p><code>area_exc</code>: Number of pixels in the region (excluding pixels in any holes). This corresponds to the <code>area</code> region property in scikit-image.</p> </li> <li> <p><code>area</code>: Number of pixels of the region with all holes filled in (i.e. including pixels in any holes). This corresponds to the <code>area_filled</code> region property in scikit-image. Yes, it's somewhat confusing that the PlanktoScope segmenter renames scikit-image's <code>area</code> region property to <code>area_exc</code> and renames scikit-image's <code>area_filled</code> region property to <code>area</code>.</p> </li> <li> <p><code>%area</code>: Ratio between the number of pixels in any holes in the region and the total number of pixels of the region with all holes filled in; calculated as <code>1 - area_exc / area</code>. In other words, this represents the proportion of the region which consists of holes. Yes, <code>%area</code> is a misleading name both because of the <code>%</code> in the name and because of the <code>area</code> in the name.</p> </li> </ul> <h4 id=equivalent-circle-properties>Equivalent-circle properties<a class=headerlink href=#equivalent-circle-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li><code>equivalent_diameter</code>: The diameter (in pixels) of a circle with the same number of pixels in its area as the number of pixels in the region (excluding pixels in any holes). This corresponds to the <code>equivalent_diameter_area</code> property in scikit-image.</li> </ul> <h4 id=equivalent-ellipse-properties>Equivalent-ellipse properties<a class=headerlink href=#equivalent-ellipse-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li> <p><code>eccentricity</code>: Eccentricity of the ellipse that has the same second-moments as the region; eccentricity is the ratio of the focal distance (distance between focal points) over the major axis length. The value is in the interval [0, 1), where a value of 0 represents a circle. This corresponds to the <code>eccentricity</code> property in scikit-image.</p> </li> <li> <p><code>major</code>: The length (in pixels) of the major axis of region's equivalent ellipse. This corresponds to the <code>axis_major_length</code> property in scikit-image.</p> </li> <li> <p><code>minor</code>: The length (in pixels) of the minor axis of the region's equivalent ellipse. This corresponds to the <code>axis_minor_length</code> property in scikit-image.</p> </li> <li> <p><code>elongation</code>: The ratio between <code>major</code> and <code>minor</code>.</p> </li> <li> <p><code>angle</code>: Angle (in degrees) between the x-axis of the input median-corrected image and the major axis of the region's equivalent ellipse. Values range from 0 deg to 180 deg counter-clockwise. This is calculated from the <code>orientation</code> property in scikit-image.</p> </li> </ul> <h4 id=equivalent-object-perimeter-properties>Equivalent-object perimeter properties<a class=headerlink href=#equivalent-object-perimeter-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li> <p><code>perim.</code>: Perimeter (in pixels) of an object which approximates the region's contour as a line through the centers of border pixels using a 4-connectivity. This corresponds to the <code>perimeter</code> property in scikit-image.</p> </li> <li> <p><code>perimareaexc</code>: Ratio between the perimeter and the number of pixels in the region (excluding pixels in any holes). Calculated as <code>perim. / area_exc</code>.</p> </li> <li> <p><code>perimmajor</code>: Ratio between the perimeter and the length of the major axis of the region's equivalent ellipse. Calculated as <code>perim. / major</code>.</p> </li> <li> <p><code>circ.</code>: The <a href="https://en.wikipedia.org/wiki/Roundness#Roundness_error_definitions">roundness</a> of the region's equivalent object, including pixels in any holes. Calculated as <code>4 * Ï€ * area / (perim. * perim.)</code>. Ranges from 1 for a perfect circle to 0 for highly non-circular shapes.</p> </li> <li> <p><code>circex</code>: The roundness of the region's equivalent object, excluding pixels in any holes. Calculated as <code>4 * Ï€ * area_exc / (perim. * perim.)</code>. Ranges from 1 for a perfect circle to 0 for highly non-circular shapes or shapes with many large holes.</p> </li> </ul> <h4 id=bounding-box-properties>Bounding box properties<a class=headerlink href=#bounding-box-properties title="Permanent link">ðŸ”—</a></h4> <p>The bounding box is the smallest rectangle which includes all pixels of the region, under the constraint that the edges of the box are parallel to the x- and y-axes of the input median-corrected image.</p> <ul> <li> <p><code>bx</code>: x-position (in pixels) of the top-left corner of the region's bounding box, relative to the top-left corner of the input median-corrected image. This corresponds to the second element of the <code>bbox</code> property in scikit-image.</p> </li> <li> <p><code>by</code>: y-position (in pixels) of the top-left corner of the region's bounding box, relative to the top-left corner of the input median-corrected image. This corresponds to the first element of the <code>bbox</code> property in scikit-image.</p> </li> <li> <p><code>width</code>: Width (in number of pixels) of the region's bounding box. This is calculated from the elements of the <code>bbox</code> property in scikit-image.</p> </li> <li> <p><code>height</code>: Height (in number of pixels) of the region's bounding box. This is calculated from the elements of the <code>bbox</code> property in scikit-image.</p> </li> <li> <p><code>bounding_box_area</code>: Number of pixels in the region's bounding box; equivalent to <code>width * height</code>. This corresponds to the <code>area_bbox</code> region property in scikit-image.</p> </li> <li> <p><code>extent</code>: Ratio between the number of pixels in the region (excluding pixels in any holes) and the number of pixels in the region's bounding box; equivalent to <code>area_exc / bounding_box_area</code>. This corresponds to the <code>extent</code> region property in scikit-image.</p> </li> </ul> <h4 id=convex-hull-properties>Convex hull properties<a class=headerlink href=#convex-hull-properties title="Permanent link">ðŸ”—</a></h4> <p>The convex hull is the smallest convex polygon which encloses the region.</p> <ul> <li> <p><code>convex_area</code>: Number of pixels in the convex hull of the region. This corresponds to the <code>area_convex</code> region property in scikit-image.</p> </li> <li> <p><code>solidity</code>: Ratio between the number of pixels in the region (excluding pixels in any holes) and the number of pixels in the convex hull of the region. Equivalent to <code>area_exc / convex_area</code>. This corresponds to the <code>solidity</code> region property in scikit-image.</p> </li> </ul> <h4 id=unweighted-centroid-properties>Unweighted centroid properties<a class=headerlink href=#unweighted-centroid-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li> <p><code>x</code>: x-position (in pixels) of the centroid of the object, relative to the top-left corner of the input median-corrected image. This corresponds to the second element of the <code>centroid</code> region property in scikit-image.</p> </li> <li> <p><code>y</code>: y-position (in pixels) of the centroid of the object, relative to the top-left corner of the input median-corrected image. This corresponds to the first element of the <code>centroid</code> region property in scikit-image.</p> </li> <li> <p><code>local_centroid_col</code>: x-position (in pixels) of the centroid of the object, relative to the top-left corner of the region's bounding box; equivalent to <code>x - bx</code>. This corresponds to the second element of the <code>centroid_local</code> region property in scikit-image.</p> </li> <li> <p><code>local_centroid_row</code>: y-position (in pixels) of the centroid of the object, relative to the top-left corner of the region's bounding box; equivalent to <code>y - by</code>. This corresponds to the first element of the <code>centroid_local</code> region property in scikit-image.</p> </li> </ul> <h4 id=topological-properties>Topological properties<a class=headerlink href=#topological-properties title="Permanent link">ðŸ”—</a></h4> <ul> <li><code>euler_number</code>: The <a href="https://en.wikipedia.org/wiki/Euler_characteristic">Euler characteristic</a> of the set of non-zero pixels. Computed as the number of connected components subtracted by the number of holes (with 2-connectivity). This corresponds to the <code>euler_number</code> property in scikit-image.</li> </ul> <h3 id=output-image-cropping>Output image cropping<a class=headerlink href=#output-image-cropping title="Permanent link">ðŸ”—</a></h3> <p>Finally, a segmented and cropped image of the object (including pixels in any holes in the object) is saved from the input median-corrected image, but with the crop expanded by up to 10 pixels in each direction (TODO: check whether this description is accurate - the corresponding code is extremely unreadable).</p> <p>Thus, the output of the output-extraction step is a set of objects, each with a corresponding cropped image saved to file and with a corresponding list of metadata values.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 26, 2024</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright PlanktoScope project contributors </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class=md-social> <a href="https://github.com/PlanktoScope" target="_blank" rel="noopener" title="github.com" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href="https://planktoscope.slack.com" target="_blank" rel="noopener" title="planktoscope.slack.com" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.indexes", "toc.follow", "content.action.edit", "content.code.annotate", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.3220b9d7.min.js></script> <script id=init-glightbox>document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>